# AGENTS.md - AI编程助手行为规范

## WHAT - 项目概述

本文档是一个**通用 AI 编程助手行为规范模板**，适用于使用 Cursor、Claude 等 AI 工具进行软件开发的项目。

本文档基于**软件工程的结构化方法**，强调需求追溯、模块独立性、渐增式集成等原则。适用于软件工程项目的各个阶段：需求分析、设计、实现、测试等。

## WHY - 文档目的

本文档旨在引导 AI 编程助手理解代码库和项目规范，确保生成的代码符合项目要求和开发者期望。

**重要提示**：本文档会进入与 AI 的每一次会话，因此只包含**普遍适用的核心原则**。详细的规范文档请参考渐进式披露部分。

## HOW - 核心工作原则

### 核心行为准则

1. **认真查阅** - 查阅文档和代码，不猜测接口
2. **主动确认** - 不确定时主动寻求用户确认
3. **人类确认** - 业务逻辑向人类确认，不盲目猜测
4. **复用优先** - 优先复用现有接口和代码，不创建新接口
5. **主动测试** - 完成后主动进行测试验证
6. **遵循规范** - 遵循项目架构和规范，不破坏现有结构
7. **诚实沟通** - 不理解时诚实说明，不假装理解
8. **谨慎重构** - 重构前充分理解，不盲目修改
9. **需求追溯** - 建立需求跟踪，确保代码和测试能追溯到用户需求
10. **设计原则** - 遵循高内聚、低耦合的模块设计原则

### 基本工作流程

1. **开始前**：查阅代码库，理解项目结构和现有实现
2. **实现时**：优先复用现有代码和接口
3. **不确定时**：主动询问用户确认
4. **完成后**：进行测试验证，确保代码可运行
5. **需求相关**：建立需求跟踪，确保功能可追溯到用户需求

### 代码生成要求

- 生成完整、可运行的代码，包含必要导入和完整逻辑
- 确保代码可通过编译，无语法错误
- 优先确保代码可运行，功能可后续完善
- 参考项目现有代码风格和命名规范，保持一致性
- 使用中文进行回答和代码注释

## 渐进式披露 - 详细规范文档

本文档只包含核心原则。对于特定任务，请查阅以下详细规范文档：

- **`docs/design-principles.md`** - 设计规范（模块设计原则、模块独立性、设计评审等）
- **`docs/testing-guidelines.md`** - 测试规范（测试计划、测试策略、测试类型、测试覆盖等）
- **`docs/requirements-tracking.md`** - 需求追溯规范（需求评审、需求追溯、需求变更管理等）
- **`docs/code-organization.md`** - 代码组织规范（文件结构、代码风格、构建流程等）

**使用方式**：
- 开始相关任务前，判断是否需要查阅详细规范
- 需要时，先向用户展示要查阅的文档列表，获得确认后阅读
- 或直接阅读相关文档，仅关注与当前任务相关的部分

## 使用说明

### 在 Cursor 中使用

1. 将本文件放在项目根目录
2. Cursor 会自动识别并参考本文档中的规范
3. 建议结合项目的需求跟踪矩阵和系统结构图使用
4. 在对话中可以引用本文档来提醒 AI 遵循规范

### 在 Claude 中使用

1. 将本文档内容添加到对话上下文中
2. 在开始编程任务前，明确说明需要遵循本文档规范
3. 可以随时引用具体规则来纠正 AI 行为

## 注意事项

- 本文档为通用规范，具体项目可根据需要调整
- 遇到冲突时，优先遵循项目的具体约定
- 定期更新本文档，根据实际使用情况优化规则
- 对于大型项目，建议建立需求跟踪矩阵和系统结构图
